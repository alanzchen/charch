/**
 * Created by dsds on 9/28/14.
 */
(function(l){var k=/^(code|pre|textarea)$/i;var q=/^(a|del|pre|s|strike|u)$/i;var o=/^(br|hr|i|img|pangu)$/i;var r=/^(div|h1|h2|h3|h4|h5|h6|p)$/i;function p(b){var a=b.parentNode;while(a.nodeName.search(/^(html|head|body|#document)$/i)===-1){if((a.getAttribute("contenteditable")==="true")||(a.getAttribute("g_editable")==="true")){return true}else{if(a.nodeName.search(k)>=0){return true}else{a=a.parentNode}}}return false}function s(d,a){var e=d.childNodes;for(var c=0;c<e.length;c++){var b=e[c];if(b.nodeType!==8&&b.textContent){return b===a}}}function t(d,a){var e=d.childNodes;for(var c=e.length-1;c>-1;c--){var b=e[c];if(b.nodeType!==8&&b.textContent){return b===a}}}function m(a){var b=a;var c;a=a.replace(/([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(["'])/ig,"$1 $2");a=a.replace(/(["'])([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/ig,"$1 $2");a=a.replace(/(["']+)(\s*)(.+?)(\s*)(["']+)/ig,"$1$3$5");a=a.replace(/([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(#(\S+))/ig,"$1 $2");a=a.replace(/((\S+)#)([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/ig,"$1 $3");b=a;c=b.replace(/([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([<\[\{\(]+(.*?)[>\]\}\)]+)([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/ig,"$1 $2 $4");a=c;if(b===c){a=a.replace(/([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([<>\[\]\{\}\(\)])/ig,"$1 $2");a=a.replace(/([<>\[\]\{\}\(\)])([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/ig,"$1 $2")}a=a.replace(/([<\[\{\(]+)(\s*)(.+?)(\s*)([>\]\}\)]+)/ig,"$1$3$5");a=a.replace(/([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([a-z0-9`@&%=\$\^\*\-\+\|\/\\])/ig,"$1 $2");a=a.replace(/([a-z0-9`~!%&=;\|\,\.\:\?\$\^\*\-\+\/\\])([\u3040-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/ig,"$1 $2");return a}function n(g){var y=false;var h=document.evaluate(g,document,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);var e=h.snapshotLength;var j;for(var z=e-1;z>-1;--z){var a=h.snapshotItem(z);if(p(a)){j=a;continue}var x=m(a.data);if(a.data!==x){y=true;a.data=x}if(j){if(a.nextSibling){if(a.nextSibling.nodeName.search(o)>=0){j=a;continue}}var i=a.data.toString().substr(-1)+j.data.toString().substr(0,1);var d=m(i);if(i!==d){y=true;var f=j;while(f.parentNode&&f.nodeName.search(q)===-1&&s(f.parentNode,f)){f=f.parentNode}var c=a;while(c.parentNode&&c.nodeName.search(q)===-1&&t(c.parentNode,c)){c=c.parentNode}if(c.nextSibling){if(c.nextSibling.nodeName.search(o)>=0){j=a;continue}}if(c.nodeName.search(r)===-1){if(f.nodeName.search(q)===-1){if((f.nodeName.search(k)===-1)&&(f.nodeName.search(r)===-1)){if(j.previousSibling){if(j.previousSibling.nodeName.search(o)===-1){j.data=" "+j.data}}else{j.data=" "+j.data}}}else{if(c.nodeName.search(q)===-1){a.data=a.data+" "}else{var b=document.createElement("pangu");b.innerHTML=" ";if(f.previousSibling){if(f.previousSibling.nodeName.search(o)===-1){f.parentNode.insertBefore(b,f)}}else{f.parentNode.insertBefore(b,f)}if(!b.previousElementSibling){if(b.parentNode){b.parentNode.removeChild(b)}}}}}}}j=a}return y}l.text_spacing=function(a){return m(a)};l.page_spacing=function(){var b="/html/head/title/text()";n(b);var a="/html/body//*/text()[normalize-space(.)]";["script","style","textarea"].forEach(function(d){a+='[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="'+d+'"]'});var c=n(a);return c};l.element_spacing=function(f){var d;if(f.indexOf("#")===0){var a=f.slice(1);d='id("'+a+'")//text()'}else{if(f.indexOf(".")===0){var b=f.slice(1);d='//*[contains(concat(" ",normalize-space(@class)," "), " '+b+' ")]//text()'}else{var e=f;d="//"+e+"//text()"}}var c=n(d);return c}}(window.pangu=window.pangu||{}));(function(){var a=function(){var i=document.createElement("style");i.innerHTML=".charch {   word-break: normal;   word-warp: break-word;   line-height: 1.8em;   text-align: justify}.no_line_height {   line-height: inherit}p.charch_indent, .charch_indent p {   text-indent: 2em}a.charch_link, .charch_link a {   text-decoration: none;   border-bottom: 1px solid}.charch_vertical a.charch_link, .charch_vertical.charch_link a {   border-bottom: none;   border-left: 1px solid}p.charch_pseudo, .charch_pseudo p {   text-indent: 0}p.charch_pseudo::first-letter, .charch_pseudo p::first-letter {   font-size: 2.8em;   line-height: 1.2em;   float: left}p.charch_vertical, .charch_vertical {   -webkit-writing-mode: vertical-rl;   writing-mode: vertical-rl;}em.charch, .charch em {   font-style: normal;   -webkit-text-emphasis-style: dot;   -webkit-text-emphasis-position: under;   text-emphasis-style: dot;   text-emphasis-position: under}";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(i)};var e=function(n,j,l){if(n.nodeName===j){return l(n)}var o=n.childNodes.length;for(var k=0;k<o;++k){var m=e(n.childNodes[k],j,l);k+=m;o+=m}return 0};var b=function(i){e(i,"#text",function(j){var k=j.data;k=k.replace(/“/g,"「");k=k.replace(/”/g,"」");k=k.replace(/‘/g,"『");k=k.replace(/’/g,"』");j.data=k;return 0})};var d=function(i){e(i,"A",function(k){var l=document.createElement("span"),j=document.createElement("span");l.innerText=j.innerText=" ";k.parentNode.insertBefore(l,k);k.parentNode.insertBefore(j,k.nextSibling);return 2})};var h=function(j){var i=" "+j.className+" ";if(i.indexOf(" no_cjk_latin_space ")===-1){j.className+=" charch_space"}if(i.indexOf(" no_bracket_replace ")===-1){b(j)}if(i.indexOf(" no_link_space ")===-1){d(j)}};var g=document.getElementsByClassName("charch");var f=g.length;for(var c=0;c<f;++c){h(g[c])}a();pangu.element_spacing(".charch_space")})();